

<h1>Filtrage des validations</h1>

<form method="get">
  <label>Fiche :</label>
  <select name="fiche">
    <option value="">-- Toutes --</option>
    {% for fiche in fiches %}
      <option value="{{ fiche.id }}" {% if fiche_id == fiche.id|stringformat:"s" %}selected{% endif %}>{{ fiche.title }}</option>
    {% endfor %}
  </select>

  <label>Utilisateur :</label>
  <select name="utilisateur">
    <option value="">-- Tous --</option>
    {% for u in utilisateurs %}
      <option value="{{ u.id }}" {% if utilisateur_id == u.id|stringformat:"s" %}selected{% endif %}>{{ u.username }}</option>
    {% endfor %}
  </select>

  <button type="submit">Filtrer</button>
</form>

<table border="1">
  <tr>
    <th>Fiche</th>
    <th>Utilisateur</th>
    <th>Date de validation</th>
  </tr>
  {% for v in validations %}
  <tr>
    <td>{{ v.fiche.title }}</td>
    <td>{{ v.utilisateur.username }}</td>
    <td>{{ v.date_validation|date:"Y-m-d H:i" }}</td>
  </tr>
  {% empty %}
  <tr><td colspan="3">Aucune validation trouv√©e</td></tr>
  {% endfor %}
</table>
